<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Premium Finance</title>

<style>
/* ============================================================
   BLACK PREMIUM + GOLD ELEGANT (Opci√≥n 1)
   ============================================================ */

:root {
    --bg: #0A0A0A;
    --card-bg: #0F0F0F;
    --soft-black: #111;
    --gold: #D4AF37;
    --gold-soft: #c9a33a;
    --white: #fff;
    --gray: #aaa;
    --danger: #ff4d4d;
    --success: #4dff88;
    --radius: 18px;
    --shadow: 0 0 20px rgba(212,175,55,0.15);
    font-family: 'Inter', sans-serif;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--white);
}

/* ============================================================
   TOP TITLE
   ============================================================ */
.header {
    padding: 25px 20px;
    font-size: 1.4rem;
    font-weight: 600;
    background: #0B0B0B;
    text-align: center;
    letter-spacing: 1px;
    border-bottom: 1px solid #222;
}

/* ============================================================
   TARJETA BLACK GOLD
   ============================================================ */
.card-black {
    background: linear-gradient(145deg, #000 0%, #111 70%);
    border-radius: 20px;
    padding: 22px;
    margin: 20px;
    box-shadow: 0 0 30px rgba(212,175,55,0.25);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(212,175,55,0.25);
}

.card-black::after {
    content: "";
    position: absolute;
    top: -40%;
    right: -20%;
    width: 240px;
    height: 240px;
    background: radial-gradient(circle, rgba(212,175,55,0.4) 0%, transparent 70%);
    filter: blur(30px);
}

.card-black h2 {
    color: var(--gold);
    font-size: 1.3rem;
    font-weight: 600;
}

/* ============================================================
   BUTTONS
   ============================================================ */
.btn {
    padding: 13px 18px;
    background: var(--gold);
    color: var(--black);
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: 0.2s;
}

.btn:hover {
    background: var(--gold-soft);
}

/* buttons dark */
.btn-dark {
    padding: 12px 18px;
    background: #000;
    border: 1px solid var(--gold);
    color: var(--gold);
    border-radius: 12px;
    width: 100%;
    cursor: pointer;
}

.section {
    display: none;
    padding-bottom: 100px;
}

.section.active {
    display: block;
}

.input-group {
    margin: 12px 20px;
    display: flex;
    flex-direction: column;
}

.input-group label {
    color: var(--gold);
    font-weight: 600;
    margin-bottom: 4px;
}

.input-group input {
    background: #111;
    border: 1px solid #333;
    padding: 12px;
    border-radius: 10px;
    color: var(--white);
}

.list-item {
    padding: 15px 20px;
    border-bottom: 1px solid #222;
}

.gold {
    color: var(--gold);
}

/* ============================================================
   PROGRESS BAR BLACK-GOLD
   ============================================================ */
.progress-container {
    background: #222;
    border-radius: 10px;
    height: 10px;
    margin: 15px 0;
    overflow: hidden;
}

.progress {
    background: var(--gold);
    width: 0%;
    height: 100%;
    transition: width .4s;
}

/* ============================================================
   BOTTOM MENU / NAVIGATION
   ============================================================ */
.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: #0B0B0B;
    border-top: 1px solid #222;
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
}

.bottom-nav button {
    background: transparent;
    border: none;
    color: var(--gray);
    font-size: .85rem;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.bottom-nav button.active {
    color: var(--gold);
}

.icon {
    font-size: 1.4rem;
    margin-bottom: 3px;
}

/* ============================================================
   TITLES IN SECTIONS
   ============================================================ */
.section-title {
    margin: 20px;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--gold);
}
</style>
</head>
<body>

<div class="header">BLACK PREMIUM FINANCE</div>

<!-- ============================================================
     PANTALLA 1 ‚Äî HOME / DASHBOARD
============================================================ -->
<div id="home" class="section active">

    <h2 class="section-title">Mis Deudas Activas</h2>
    <div id="listaDeudas"></div>

    <h2 class="section-title">Pr√≥ximo Pago</h2>
    <div id="proximoPago" class="list-item gold"></div>

</div>

<!-- ============================================================
     PANTALLA 2 ‚Äî NUEVA COMPRA
============================================================ -->
<div id="nueva" class="section">

    <h2 class="section-title">Registrar Compra</h2>

    <div class="input-group">
        <label>Nombre de la Tarjeta</label>
        <input id="tarjetaNombre" type="text">
    </div>

    <div class="input-group">
        <label>Monto de la Compra</label>
        <input id="montoCompra" type="number">
    </div>

    <div class="input-group">
        <label>N√∫mero de Meses</label>
        <input id="meses" type="number">
    </div>

    <div class="input-group">
        <label>Fecha de Compra</label>
        <input id="fechaCompra" type="date">
    </div>

    <button class="btn" onclick="registrarCompra()">Guardar Compra</button>
</div>

<!-- ============================================================
     PANTALLA 3 ‚Äî ABONOS
============================================================ -->
<div id="abonos" class="section">
    <h2 class="section-title">Abonar a una Deuda</h2>

    <div id="listaAbonos"></div>
</div>

<!-- ============================================================
     PANTALLA 4 ‚Äî CONFIG
============================================================ -->
<div id="config" class="section">
    <h2 class="section-title">Configuraci√≥n</h2>

    <div class="input-group">
        <label>Salario Mensual</label>
        <input id="salario" type="number">
    </div>

    <button class="btn" onclick="guardarSalario()">Guardar Salario</button>

    <h2 class="section-title">Resetear</h2>
    <button class="btn-dark" onclick="resetDatos()">Borrar Todo</button>
</div>

<!-- ============================================================
     MEN√ö INFERIOR
============================================================ -->
<div class="bottom-nav">
    <button onclick="show('home', this)" class="active"><span class="icon">üè†</span>Inicio</button>
    <button onclick="show('nueva', this)"><span class="icon">‚ûï</span>Nueva</button>
    <button onclick="show('abonos', this)"><span class="icon">üí∞</span>Abonos</button>
    <button onclick="show('config', this)"><span class="icon">‚öôÔ∏è</span>Config</button>
</div>

<script>
function show(id, btn) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');

    document.querySelectorAll('.bottom-nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}
/* ============================================================
   BLOQUE 2/3 ‚Äî SISTEMA DE COMPRAS, CUOTAS Y PANTALLAS
   ============================================================ */

let compras = JSON.parse(localStorage.getItem("compras")) || [];
let salarioMensual = JSON.parse(localStorage.getItem("salarioMensual")) || 0;

/* ============================================================
   FUNCI√ìN: Registrar compra nueva
   ============================================================ */
function registrarCompra() {
    const nombre = document.getElementById("tarjetaNombre").value;
    const monto = parseFloat(document.getElementById("montoCompra").value);
    const meses = parseInt(document.getElementById("meses").value);
    const fecha = document.getElementById("fechaCompra").value;

    if (!nombre || !monto || !meses || !fecha) {
        alert("Completa todos los campos.");
        return;
    }

    const cuota = monto / meses;

    const obj = {
        id: Date.now(),
        nombre,
        monto,
        meses,
        fecha,
        cuota,
        abonosExtra: [],
    };

    compras.push(obj);
    localStorage.setItem("compras", JSON.stringify(compras));

    document.getElementById("tarjetaNombre").value = "";
    document.getElementById("montoCompra").value = "";
    document.getElementById("meses").value = "";
    document.getElementById("fechaCompra").value = "";

    renderDeudas();
    renderAbonos();
    calcularProximoPago();

    alert("Compra registrada.");
}

/* ============================================================
   FUNCIONES DE C√ÅLCULO
   ============================================================ */
function mesesPagados(compra) {
    const fechaCompra = new Date(compra.fecha);
    const hoy = new Date();

    let diff =
        (hoy.getFullYear() - fechaCompra.getFullYear()) * 12 +
        (hoy.getMonth() - fechaCompra.getMonth());

    if (diff < 0) diff = 0;
    if (diff > compra.meses) diff = compra.meses;

    return diff;
}

function saldoPendiente(compra) {
    const pag = mesesPagados(compra);
    const pagado = pag * compra.cuota;

    const abonosExtra = compra.abonosExtra.reduce((s, a) => s + a.monto, 0);

    return compra.monto - pagado - abonosExtra;
}

function mesesPendientes(compra) {
    return Math.ceil(saldoPendiente(compra) / compra.cuota);
}

/* ============================================================
   RENDER PRINCIPAL ‚Äî HOME
   Tarjetas de Deudas Activas en estilo Black Gold
   ============================================================ */
function renderDeudas() {
    const cont = document.getElementById("listaDeudas");
    cont.innerHTML = "";

    compras.forEach(c => {
        const pag = mesesPagados(c);
        const pen = mesesPendientes(c);
        const pendienteDinero = saldoPendiente(c);
        const porcentaje = (pag / c.meses) * 100;

        const div = document.createElement("div");
        div.className = "card-black";

        div.innerHTML = `
            <h2>${c.nombre}</h2>

            <div style="margin-top:10px;font-size:1.1rem;">
                <span class="gold">$${c.monto.toFixed(2)}</span> en ${c.meses} meses
            </div>

            <div style="margin-top:8px;">
                Pagado: <span class="gold">${pag}</span> / ${c.meses}
                <br>
                Pendientes: <span class="gold">${pen}</span>
            </div>

            <div class="progress-container">
                <div class="progress" style="width:${porcentaje}%"></div>
            </div>

            <div style="margin-top:15px;">
                <strong>Saldo pendiente:</strong> 
                <span class="gold">$${pendienteDinero.toFixed(2)}</span>
            </div>

            <button class="btn" style="margin-top:15px;" onclick="abrirAbono(${c.id})">
                ABONAR
            </button>
        `;

        cont.appendChild(div);
    });
}

/* ============================================================
   ABRIR ABONO DESDE TARJETA
   ============================================================ */
function abrirAbono(id) {
    show('abonos', document.querySelectorAll('.bottom-nav button')[2]);

    document.querySelectorAll('.abono-card').forEach(e => e.remove());

    compras.forEach(c => {
        if (c.id === id) {
            const cont = document.getElementById("listaAbonos");

            const saldo = saldoPendiente(c);

            const div = document.createElement("div");
            div.className = "card-black abono-card";
            div.innerHTML = `
                <h2>${c.nombre}</h2>

                <div style="margin-top:10px;">Saldo pendiente:
                    <span class="gold">$${saldo.toFixed(2)}</span>
                </div>

                <div class="input-group" style="margin-top:15px;">
                    <label>Monto a abonar</label>
                    <input id="abonoInput${c.id}" type="number">
                </div>

                <button class="btn" onclick="registrarAbono(${c.id})">
                    Registrar Abono
                </button>
            `;

            cont.appendChild(div);
        }
    });
}

/* ============================================================
   REGISTRAR ABONO EXTRA
   ============================================================ */
function registrarAbono(id) {
    const compra = compras.find(c => c.id === id);
    const campo = document.getElementById(`abonoInput${id}`);

    const monto = parseFloat(campo.value);

    if (!monto || monto <= 0) {
        alert("Ingresa un monto v√°lido.");
        return;
    }

    compra.abonosExtra.push({
        fecha: new Date().toISOString().split("T")[0],
        monto
    });

    localStorage.setItem("compras", JSON.stringify(compras));

    campo.value = "";

    renderDeudas();
    renderAbonos();
    calcularProximoPago();

    alert("Abono registrado.");
}

/* ============================================================
   LISTADO GENERAL DE ABONOS
   ============================================================ */
function renderAbonos() {
    const cont = document.getElementById("listaAbonos");
    cont.innerHTML = "";

    compras.forEach(c => {
        const saldo = saldoPendiente(c);

        const div = document.createElement("div");
        div.className = "card-black";

        let hist = "";
        c.abonosExtra.forEach(a => {
            hist += `<div style="font-size:.9rem;color:#aaa;margin-top:4px;">‚Ä¢ ${a.fecha}: $${a.monto.toFixed(2)}</div>`;
        });

        div.innerHTML = `
            <h2>${c.nombre}</h2>
            <div>Saldo pendiente: <span class="gold">$${saldo.toFixed(2)}</span></div>

            <button class="btn" style="margin-top:10px;" onclick="abrirAbono(${c.id})">
                Abonar
            </button>

            <div style="margin-top:15px;font-size:1rem;color:${hist ? '#fff':'#777'};">
                ${hist ? "Historial de abonos:" : "Sin abonos extra a√∫n"}
                ${hist}
            </div>
        `;

        cont.appendChild(div);
    });
}

/* ============================================================
   PR√ìXIMO PAGO ‚Äî D√≠a 16 (o 15 si cae domingo)
   ============================================================ */
function calcularProximoPago() {
    const hoy = new Date();
    let pago = new Date(hoy.getFullYear(), hoy.getMonth(), 16);

    if (pago.getDay() === 0) pago.setDate(15);

    const fecha =
        pago.toISOString().split("T")[0];

    const cont = document.getElementById("proximoPago");
    cont.innerHTML = compras.length === 0
        ? "No hay pagos pr√≥ximos."
        : `üìÖ ${fecha} ‚Äî Cuota mensual de cada deuda`;
}

/* ============================================================
   RUN AT START
============================================================ */
renderDeudas();
renderAbonos();
calcularProximoPago();
/* ============================================================
   BLOQUE 3/3 ‚Äî SALARIO + RESET + UTILIDADES + CIERRE
   ============================================================ */

/* ============================================================
   SALARIO
   ============================================================ */

function guardarSalario() {
    const val = parseFloat(document.getElementById("salario").value);

    if (!val || val <= 0) {
        alert("Salario inv√°lido.");
        return;
    }

    salarioMensual = val;
    localStorage.setItem("salarioMensual", JSON.stringify(salarioMensual));

    alert("Salario guardado.");
}

/* ============================================================
   RESET TOTAL
   ============================================================ */

function resetDatos() {
    if (!confirm("¬øSeguro que deseas eliminar todos los datos?")) return;

    compras = [];
    salarioMensual = 0;

    localStorage.removeItem("compras");
    localStorage.removeItem("salarioMensual");

    renderDeudas();
    renderAbonos();
    calcularProximoPago();

    alert("Sistema reiniciado.");
}

/* ============================================================
   INICIALIZACI√ìN FINAL
   ============================================================ */

document.addEventListener("DOMContentLoaded", () => {
    renderDeudas();
    renderAbonos();
    calcularProximoPago();
});

/* ============================================================
   CIERRE DEL SCRIPT
   ============================================================ */
</script>

</body>
</html>
